<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <title>3.3 Perancangan Database</title>
    <style>
        body {
            font-family: Times New Roman, serif;
            font-size: 11pt;
            margin: 30px;
            line-height: 1.5;
        }

        h2 {
            font-size: 12pt;
            font-weight: bold;
            margin: 15px 0 10px 0;
        }

        h3 {
            font-size: 11pt;
            font-weight: bold;
            margin: 12px 0 8px 0;
        }

        table {
            border-collapse: collapse;
            width: auto;
            margin: 8px 0;
            font-size: 10pt;
        }

        th,
        td {
            border: 1px solid #000;
            padding: 3px 8px;
            text-align: left;
        }

        th {
            background: #f0f0f0;
        }

        p {
            text-align: justify;
            margin: 8px 0;
        }

        .caption {
            text-align: center;
            font-size: 10pt;
            margin: 5px 0 15px 0;
        }
    </style>
</head>

<body>

    <h2>3.3 Perancangan Database</h2>
    <p>Perancangan database bertujuan untuk mendefinisikan struktur penyimpanan data yang efisien dan terorganisir.
        Sistem aplikasi HARPA BANUA menggunakan basis data NoSQL dengan Database Management System (DBMS) MongoDB.
        Berbeda dengan basis data relasional konvensional, MongoDB menyimpan data dalam bentuk dokumen format BSON
        (Binary JSON) yang dikelompokkan dalam koleksi (Collections).</p>

    <h3>3.3.1 Daftar Koleksi Database</h3>
    <table>
        <tr>
            <th>No</th>
            <th>Nama Koleksi</th>
            <th>Keterangan</th>
        </tr>
        <tr>
            <td>1</td>
            <td>users</td>
            <td>Menyimpan data pengguna sistem</td>
        </tr>
        <tr>
            <td>2</td>
            <td>pasar</td>
            <td>Menyimpan data pasar tradisional</td>
        </tr>
        <tr>
            <td>3</td>
            <td>komoditas</td>
            <td>Menyimpan data jenis komoditas pangan</td>
        </tr>
        <tr>
            <td>4</td>
            <td>laporan_harga</td>
            <td>Menyimpan data laporan harga harian</td>
        </tr>
        <tr>
            <td>5</td>
            <td>sessions</td>
            <td>Menyimpan data session login pengguna</td>
        </tr>
    </table>
    <p class="caption">Tabel 3.1 Daftar Koleksi Database HARPA BANUA</p>

    <h3>3.3.2 Struktur Koleksi users</h3>
    <table>
        <tr>
            <th>No</th>
            <th>Field</th>
            <th>Tipe</th>
            <th>Keterangan</th>
        </tr>
        <tr>
            <td>1</td>
            <td>id</td>
            <td>int</td>
            <td>Primary Key</td>
        </tr>
        <tr>
            <td>2</td>
            <td>nip</td>
            <td>string</td>
            <td>NIP 18 digit (unique)</td>
        </tr>
        <tr>
            <td>3</td>
            <td>nama_lengkap</td>
            <td>string</td>
            <td>Nama lengkap</td>
        </tr>
        <tr>
            <td>4</td>
            <td>username</td>
            <td>string</td>
            <td>Username login (unique)</td>
        </tr>
        <tr>
            <td>5</td>
            <td>password</td>
            <td>string</td>
            <td>Password (bcrypt)</td>
        </tr>
        <tr>
            <td>6</td>
            <td>role</td>
            <td>string</td>
            <td>admin/petugas/super_admin</td>
        </tr>
        <tr>
            <td>7</td>
            <td>is_active</td>
            <td>int</td>
            <td>1=aktif, 0=nonaktif</td>
        </tr>
        <tr>
            <td>8</td>
            <td>phone</td>
            <td>string</td>
            <td>Nomor telepon</td>
        </tr>
        <tr>
            <td>9</td>
            <td>alamat</td>
            <td>string</td>
            <td>Alamat</td>
        </tr>
        <tr>
            <td>10</td>
            <td>foto</td>
            <td>string</td>
            <td>URL foto profil</td>
        </tr>
        <tr>
            <td>11</td>
            <td>created_at</td>
            <td>Date</td>
            <td>Tanggal dibuat</td>
        </tr>
        <tr>
            <td>12</td>
            <td>updated_at</td>
            <td>Date</td>
            <td>Tanggal diupdate</td>
        </tr>
    </table>
    <p class="caption">Tabel 3.2 Struktur Koleksi users</p>

    <h3>3.3.3 Struktur Koleksi pasar</h3>
    <table>
        <tr>
            <th>No</th>
            <th>Field</th>
            <th>Tipe</th>
            <th>Keterangan</th>
        </tr>
        <tr>
            <td>1</td>
            <td>id</td>
            <td>int</td>
            <td>Primary Key</td>
        </tr>
        <tr>
            <td>2</td>
            <td>nama_pasar</td>
            <td>string</td>
            <td>Nama pasar (unique)</td>
        </tr>
        <tr>
            <td>3</td>
            <td>alamat</td>
            <td>string</td>
            <td>Alamat pasar</td>
        </tr>
        <tr>
            <td>4</td>
            <td>created_at</td>
            <td>Date</td>
            <td>Tanggal dibuat</td>
        </tr>
        <tr>
            <td>5</td>
            <td>updated_at</td>
            <td>Date</td>
            <td>Tanggal diupdate</td>
        </tr>
    </table>
    <p class="caption">Tabel 3.3 Struktur Koleksi pasar</p>

    <h3>3.3.4 Struktur Koleksi komoditas</h3>
    <table>
        <tr>
            <th>No</th>
            <th>Field</th>
            <th>Tipe</th>
            <th>Keterangan</th>
        </tr>
        <tr>
            <td>1</td>
            <td>id</td>
            <td>int</td>
            <td>Primary Key</td>
        </tr>
        <tr>
            <td>2</td>
            <td>nama_komoditas</td>
            <td>string</td>
            <td>Nama komoditas (unique)</td>
        </tr>
        <tr>
            <td>3</td>
            <td>unit</td>
            <td>string</td>
            <td>Satuan (Rp/Kg, Rp/Liter)</td>
        </tr>
        <tr>
            <td>4</td>
            <td>created_at</td>
            <td>Date</td>
            <td>Tanggal dibuat</td>
        </tr>
        <tr>
            <td>5</td>
            <td>updated_at</td>
            <td>Date</td>
            <td>Tanggal diupdate</td>
        </tr>
    </table>
    <p class="caption">Tabel 3.4 Struktur Koleksi komoditas</p>

    <h3>3.3.5 Struktur Koleksi laporan_harga</h3>
    <table>
        <tr>
            <th>No</th>
            <th>Field</th>
            <th>Tipe</th>
            <th>Keterangan</th>
        </tr>
        <tr>
            <td>1</td>
            <td>id</td>
            <td>int</td>
            <td>Primary Key</td>
        </tr>
        <tr>
            <td>2</td>
            <td>tanggal_lapor</td>
            <td>string</td>
            <td>Tanggal (YYYY-MM-DD)</td>
        </tr>
        <tr>
            <td>3</td>
            <td>market_id</td>
            <td>int</td>
            <td>FK → pasar.id</td>
        </tr>
        <tr>
            <td>4</td>
            <td>komoditas_id</td>
            <td>int</td>
            <td>FK → komoditas.id</td>
        </tr>
        <tr>
            <td>5</td>
            <td>user_id</td>
            <td>int</td>
            <td>FK → users.id</td>
        </tr>
        <tr>
            <td>6</td>
            <td>harga</td>
            <td>int</td>
            <td>Harga (Rupiah)</td>
        </tr>
        <tr>
            <td>7</td>
            <td>keterangan</td>
            <td>string</td>
            <td>Catatan</td>
        </tr>
        <tr>
            <td>8</td>
            <td>foto_url</td>
            <td>string</td>
            <td>URL foto bukti</td>
        </tr>
        <tr>
            <td>9</td>
            <td>gps_url</td>
            <td>string</td>
            <td>Koordinat GPS</td>
        </tr>
        <tr>
            <td>10</td>
            <td>created_at</td>
            <td>Date</td>
            <td>Tanggal dibuat</td>
        </tr>
        <tr>
            <td>11</td>
            <td>updated_at</td>
            <td>Date</td>
            <td>Tanggal diupdate</td>
        </tr>
    </table>
    <p class="caption">Tabel 3.5 Struktur Koleksi laporan_harga</p>

    <h3>3.3.6 Struktur Koleksi sessions</h3>
    <table>
        <tr>
            <th>No</th>
            <th>Field</th>
            <th>Tipe</th>
            <th>Keterangan</th>
        </tr>
        <tr>
            <td>1</td>
            <td>_id</td>
            <td>string</td>
            <td>Session ID (Primary Key)</td>
        </tr>
        <tr>
            <td>2</td>
            <td>session</td>
            <td>object</td>
            <td>Data session (user, cookie)</td>
        </tr>
        <tr>
            <td>3</td>
            <td>expires</td>
            <td>Date</td>
            <td>Waktu kadaluarsa session</td>
        </tr>
    </table>
    <p class="caption">Tabel 3.6 Struktur Koleksi sessions</p>

</body>

</html>