<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <title>3.3.2 Logical Record Structure (LRS)</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: Times New Roman, serif;
            font-size: 11pt;
            margin: 30px;
            line-height: 1.5;
        }

        h2 {
            font-size: 12pt;
            font-weight: bold;
            margin: 15px 0 10px 0;
        }

        p {
            text-align: justify;
            margin: 8px 0;
        }

        .diagram-container {
            background: #fff;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
        }

        .mermaid {
            display: flex;
            justify-content: center;
        }

        .caption {
            text-align: center;
            font-size: 10pt;
            margin: 10px 0;
        }
    </style>
</head>

<body>

    <h2>3.3.2 Logical Record Structure (LRS)</h2>

    <p>Meskipun sistem menggunakan basis data NoSQL, representasi hubungan antar data dapat digambarkan melalui struktur
        Logical Record Structure (LRS). LRS di bawah ini merepresentasikan bagaimana Primary Key (ID) dari satu koleksi
        dihubungkan sebagai Foreign Key (Referensi) di koleksi lain.</p>

    <div class="diagram-container">
        <pre class="mermaid">
erDiagram
    users {
        int id PK
        string nip UK
        string nama_lengkap
        string username UK
        string password
        string role
        int is_active
        string phone
        string alamat
        string foto
        Date created_at
        Date updated_at
    }

    pasar {
        int id PK
        string nama_pasar UK
        string alamat
        Date created_at
        Date updated_at
    }

    komoditas {
        int id PK
        string nama_komoditas UK
        string unit
        Date created_at
        Date updated_at
    }

    laporan_harga {
        int id PK
        string tanggal_lapor
        int market_id FK
        int komoditas_id FK
        int user_id FK
        int harga
        string keterangan
        string foto_url
        string gps_url
        Date created_at
        Date updated_at
    }

    sessions {
        string _id PK
        object session
        Date expires
    }

    users ||--o{ laporan_harga : "user_id"
    pasar ||--o{ laporan_harga : "market_id"
    komoditas ||--o{ laporan_harga : "komoditas_id"
    users ||--o{ sessions : "session.user.id"
    </pre>
    </div>

    <p class="caption"><b>Gambar 3.8</b> Logical Record Structure (LRS) Database HARPA BANUA</p>

    <p><b>Keterangan:</b></p>
    <ul style="margin-left: 20px;">
        <li><b>PK</b> = Primary Key</li>
        <li><b>FK</b> = Foreign Key</li>
        <li><b>UK</b> = Unique Key</li>
        <li>Garis penghubung menunjukkan relasi antar koleksi</li>
    </ul>

    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>

</body>

</html>