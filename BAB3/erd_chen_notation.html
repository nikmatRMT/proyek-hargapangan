<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <title>3.3.1 Entity Relationship Diagram</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: Times New Roman, serif;
            font-size: 11pt;
            margin: 30px;
            line-height: 1.5;
        }

        h2 {
            font-size: 12pt;
            font-weight: bold;
            margin: 15px 0 10px 0;
        }

        p {
            text-align: justify;
            margin: 8px 0;
        }

        .diagram-container {
            background: #fff;
            padding: 20px;
            margin: 15px 0;
        }

        .mermaid {
            display: flex;
            justify-content: center;
        }

        .caption {
            text-align: center;
            font-size: 10pt;
            margin: 10px 0;
        }
    </style>
</head>

<body>

    <h2>3.3.1 Entity Relationship Diagram (ERD)</h2>

    <p>Entity Relationship Diagram (ERD) menggambarkan hubungan antar entitas dalam database sistem HARPA BANUA:</p>

    <div class="diagram-container">
        <pre class="mermaid">
flowchart TB
    subgraph Users["Users (Admin / Petugas / Super Admin)"]
        U[Users]
    end
    
    Pasar[Pasar]
    Komoditas[Komoditas]
    LaporanHarga[Laporan Harga]
    Sessions[Sessions]
    
    R1{Membuat}
    R2{Dimiliki}
    R3{Dimiliki}
    R4{Memiliki}
    
    U -->|1| R1
    R1 -->|N| LaporanHarga
    
    Pasar -->|1| R2
    R2 -->|N| LaporanHarga
    
    Komoditas -->|1| R3
    R3 -->|N| LaporanHarga
    
    U -->|1| R4
    R4 -->|N| Sessions
    </pre>
    </div>

    <p class="caption"><b>Gambar 3.7</b> Entity Relationship Diagram Database HARPA BANUA</p>

    <p><b>Keterangan Entitas:</b></p>
    <ul style="margin-left: 20px;">
        <li><b>Users:</b> Menyimpan data pengguna dengan role (admin, petugas, super_admin)</li>
        <li><b>Pasar:</b> Menyimpan data pasar tradisional</li>
        <li><b>Komoditas:</b> Menyimpan data jenis komoditas pangan</li>
        <li><b>Laporan Harga:</b> Menyimpan data harga harian per komoditas per pasar</li>
        <li><b>Sessions:</b> Menyimpan data session login pengguna aktif</li>
    </ul>

    <p><b>Keterangan Relasi:</b></p>
    <ul style="margin-left: 20px;">
        <li>Users membuat Laporan Harga (1:N) - Satu user dapat membuat banyak laporan</li>
        <li>Pasar memiliki Laporan Harga (1:N) - Satu pasar memiliki banyak laporan</li>
        <li>Komoditas memiliki Laporan Harga (1:N) - Satu komoditas memiliki banyak laporan</li>
        <li>Users memiliki Sessions (1:N) - Satu user dapat memiliki banyak session aktif</li>
    </ul>

    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>

</body>

</html>